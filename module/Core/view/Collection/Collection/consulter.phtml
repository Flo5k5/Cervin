<?php
$title = 'La collection numérique';
$this->headTitle($title);
?>

<?php $this->headLink()->prependStylesheet($this->basePath() . '/css/bootstrap-editable.css'); ?>
<?php $this->headLink()->prependStylesheet($this->basePath() . '/css/datatable.css'); ?>
<?php $this->headLink()->prependStylesheet($this->basePath() . '/css/pillbox.css'); ?>

<!-- Help Modal -->
<div id="helpModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
	    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
	    <h3 id="myModalLabel">Aide : collection numérique</h3>
    </div>
    <div class="modal-body">
    	<p>
    	Vous êtes sur la page principale de consultation de la collection numérique.
    	</p>
    	<p>
    	Un système de recherhe par tags vous est proposé. Vous pouvez ainsi rechercher plusieurs titre parmis les types d'artefacts et de médias que vous voulez : cliquez sur le 'plus' pour chaque tag que vous souhaitez ajouter, puis sur 'Lancer la recherche'.
    	</p>
    	<p>
    	Par défaut, la recherche s'effectue parmis tous les types d'artefacts et de médias. Pour réinitialiser la recherche, le bouton 'Vider' permet de retirer tous les tags.
    	</p>
    	<p>
    	Les résultats s'affichent sous forme de tableau, le lien sur chaque ligne permet d'accéder à la fiche détaillée de l'élément.
    	</p>
    </div>
    <div class="modal-footer">
	    <button class="btn" data-dismiss="modal" aria-hidden="true">Retour</button>
    </div>
</div>

<div class="page-header row-fluid">
	<div class="span9">
		<h1><?php echo $this->escapeHtml($title); ?> 
	    <small> <a href="#helpModal" data-toggle="modal"><i class="icon-info-sign"> </i></a></small> </h1>
	</div>
	<?php if ($this->isAllowed('Collection') === true) :?>
		<a href="<?php echo $this->url('artefact/ajouter') ?>" class="btn btn-primary span3"> <i class="icon-white icon-plus"></i>  Ajouter un artefact</a>
		<a href="<?php echo $this->url('media/ajouter') ?>" class="btn btn-primary span3"> <i class="icon-white icon-plus"></i> Ajouter un média</a>
	<?php endif; ?>
</div>
	
<div class="well">
<h3>Recherche</h3>
<form id="form-multi" name="form-multi" class="">
	<div class="row-fluid">
	
		<div class="span6 input-append">
			<input class="form-titre span10" type="text" placeholder="Titre" data-type="titre" />
			<button class="btn btn-info form-plus-titre" type="button"><i class="icon-plus"> </i></button>
		</div>

		<div class="span3">
			<div class="input-prepend input-append">
				<span class="add-on"><i class="icon-tag"> </i></span>
				<select class="form-type span9">
					<option class="type-all" data-type="type" data-value="artefact" >Tous types d'artefacts</option>
					<?php 
						foreach ($allTypeArtefact as $typeElement){
							echo '<option data-type="id" data-value="'.$typeElement->id.'" >'.$typeElement->nom.'</option>';
						}
					?>
				</select>
				<button class="btn btn-success form-plus-type" type="button"><i class="icon-plus"> </i></button>
			</div>
		</div>
		
		<div class="span3">
			<div class="input-prepend input-append">
				<!-- <label>Média</label> -->
				<span class="add-on"><i class="icon-picture"> </i></span>
				<select class="form-type span9">
					<option class="type-all" data-type="type" data-value="media" >Tous types de médias</option>
					<?php 
						foreach ($allTypeMedia as $typeElement){
							echo '<option data-type="id" data-value="'.$typeElement->id.'" >'.$typeElement->nom.'</option>';
						}
					?>
				</select>
				<button class="btn btn-warning form-plus-type" type="button"><i class="icon-plus"> </i></button>
			</div>
		</div>
		
	</div> <!-- /row-fluid -->

	<div class="form-actions">
		<div id="form-pillbox" class="pillbox" style="width:100%;">
			<p><strong>Tags :</strong></p> 
			<ul>
			</ul>
		</div>
		<button id="submit" class="btn btn-primary"><i class="icon-search"> </i> Lancer la recherche</button>
		<button class="btn btn-danger form-clear"><i class="icon-remove"> </i> Vider</button>
	</div>

</form>
</div>

<?php echo $this->DatatableWidget(); ?>

<?php $this->headScript()->appendFile($this->basePath() . '/js/pillbox.js') ;?>
<?php $this->headScript()->appendFile($this->basePath() . '/js/dataTables.js') ;?>
